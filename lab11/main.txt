#include <stdio.h>
#include <malloc.h>
#include <locale.h>

typedef struct sNode
{
    int value;
    struct sNode *next;
} tNode;


void push(tNode **head, int data)
{
    tNode *tmp = (tNode*) malloc(sizeof(tNode));
    tmp->value = data;
    tmp->next = (*head);
    (*head) = tmp;
}

tNode* getLast(tNode *head) //получаем последний элемент
{
    if (head == NULL)
	{
        return NULL;
    }
    while (head->next)
	{
        head = head->next;
    }
    return head;
}

void pushBack(tNode *head, int value) //вставляем новый элемент в конец
{
    tNode *last = getLast(head);
    tNode *tmp = (tNode*) malloc(sizeof(tNode));
    tmp->value = value;
    tmp->next = NULL;
    last->next = tmp;

	printf("Element %d Inserted into the bottom of the list.\n", value);
}

void printList(tNode *head)
{
    while (head)
	{
        printf("%d ", head->value);
        head = head->next;
    }
    printf("\n");
}

void insert(tNode *head, unsigned n, int val) //вставка элемента куда захотим :)
{
    unsigned i = 0;
    tNode *tmp = NULL;
    //Находим нужный элемент. Если вышли за пределы списка, то выходим из цикла,
    //ошибка выбрасываться не будет, произойдёт вставка в конец
    while (i < n && head->next)
	{
        head = head->next;
        i++;
    }
    tmp = (tNode*) malloc(sizeof(tNode));
    tmp->value = val;
    //Если это не последний элемент, то next перекидываем на следующий
    if (head->next)
	{
        tmp->next = head->next;
    //иначе на NULL
    }
	else
	{
        tmp->next = NULL;
    }
    head->next = tmp;
	printf("Element %d Inserted after the %d-go elements.(indexing with 0)\n", val,n);
}


void deleteList(tNode **head) //удаляем список - освобождаем память
{
    tNode* prev = NULL;
    while ((*head)->next) {
        prev = (*head);
        (*head) = (*head)->next;
        free(prev);
    }
    free(*head);
	printf("List deleted!\n");
}


void main()
{
    tNode* head = NULL;
	setlocale(0,"");
	printf("Create a list.Add to it the element = 54\n");
	push(&head,54);//первый элемент списка

    pushBack(head, 14);
    pushBack(head, -812);
    pushBack(head, 5);
    pushBack(head, 522);
    insert(head, 3, 1);

	printf("\nLinked List:\n");
    printList(head);
	deleteList(&head);
}
